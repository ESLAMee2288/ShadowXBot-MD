import yts from "yt-search";

var handler = async (m, { text, conn, command, usedPrefix }) => {
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù… ÙŠØ¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ÙƒÙˆØ±Ø³
  if (!text) {
    return conn.reply(
      m.chat,
      `ğŸŒ¸ *Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„Ù„ÙŠ Ø¹Ø§ÙŠØ² ØªØ¯ÙˆØ± Ø¹Ù„ÙŠÙ‡*\n\nÙ…Ø«Ø§Ù„ØŒ ${usedPrefix + command} ØªØ¹Ù„Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©`,
      m,
    );
  }

  // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù‚Ø§Ø·Ø¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆÙ‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª
  let results = await yts(text);
  let videos = results.all.filter((v) => v.type === "video"); // ÙÙ„ØªØ±Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
  let playlists = results.playlists || []; // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ´ØºÙŠÙ„

  // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø£Ùˆ Ù‚ÙˆØ§Ø¦Ù… ØªØ´ØºÙŠÙ„
  if (videos.length === 0 && playlists.length === 0) {
    return conn.reply(
      m.chat,
      `ğŸš« *Ù…Ø§ÙÙŠØ´ ÙƒÙˆØ±Ø³Ø§Øª Ø£Ùˆ Ù‚ÙˆØ§Ø¦Ù… ØªØ´ØºÙŠÙ„ Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù„ÙŠ ÙƒØªØ¨ØªÙ‡ØŒ Ø­Ø§ÙˆÙ„ ØªÙƒØªØ¨ Ø§Ø³Ù… ØªØ§Ù†ÙŠ.*`,
      m,
    );
  }

  let teks = "";

  // Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
  if (videos.length > 0) {
    teks += `ğŸ¥ *Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©:*\n\n`;
    teks += videos
      .map((video, index) => {
        return `ğŸ”¢ *Ø±Ù‚Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ:* ${index + 1}
ğŸŒ¸ *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${video.title}
ğŸ”— *Ø§Ù„Ø±Ø§Ø¨Ø·:* ${video.url}
ğŸ• *Ø§Ù„Ù…Ø¯Ø©:* ${video.timestamp}
ğŸ“š *ÙˆØµÙ:* ${video.description || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ"}
ğŸ‘¨â€ğŸ« *Ø§Ù„Ù†Ø§Ø´Ø±:* ${video.author.name}`;
      })
      .join("\n\nâ€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\n\n");
  }

  // Ø¹Ø±Ø¶ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ´ØºÙŠÙ„
  if (playlists.length > 0) {
    teks += `ğŸ¶ *Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©:*\n\n`;
    teks += playlists
      .map((playlist, index) => {
        return `ğŸ”¢ *Ø±Ù‚Ù… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©:* ${index + 1}
ğŸŒ¸ *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${playlist.title}
ğŸ”— *Ø§Ù„Ø±Ø§Ø¨Ø·:* ${playlist.url}
ğŸ• *Ø¹Ø¯Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª:* ${playlist.videos.length}
ğŸ‘¨â€ğŸ« *Ø§Ù„Ù†Ø§Ø´Ø±:* ${playlist.author.name}`;
      })
      .join("\n\nâ€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\n\n");
  }

  // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ø¹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª
  conn.reply(m.chat, teks, m);
};

handler.help = ["Ø¨Ø­Ø« ÙƒÙˆØ±Ø³Ø§Øª"];
handler.tags = ["Ø¨Ø­Ø«"];
handler.command = ["ÙƒÙˆØ±Ø³", "ÙƒÙˆØ±Ø³Ø§Øª", "course"];

handler.register = false;

export default handler;
